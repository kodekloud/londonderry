<div class="blogpost" id="blog_detail">  
    <script id="blog_detail_template" type="x-tmpl-mustache">
        <h1>
            <a href="/posts" class="back_to">
                <img src="http://kodekloud.s3.amazonaws.com/sites/54612c496e6f6474ba020000/af1f24d005afae0c7deb5b9a4e6f8952/back_btn.png" />
            </a>
            {{ title }}        
        </h1>
        
        <p>{{ publish_date }} + {{ author }}</p>
        
        <img src="{{image_url}}" />
        
        {{ html_body }}
    </script>
    <!-- DISQUS start -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = '{{disqus}}'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <!-- DISQUS end -->
</div>
<script>
    $(document).ready(function() {
        function renderPageData(){
            renderPostListTemplate('#blog_detail_template', '#blog_detail',getPostList());
            $('#loading').hide();
            $('#page_content').fadeIn('fast');
        }
        
        loadMallData(renderPageData);
    });
    
    function renderPostListTemplate(blog_template, blog_block, post){
    
        var item_list = [];
        var item_rendered = [];
        var blog_template_html = $(blog_template).html();
        Mustache.parse(blog_template_html);   // optional, speeds up future uses
    
        $.each( post , function( key, val ) {
            item_list.push(val);
        });
        item_list.sort(function(a, b){
            if(a.publish_date > b.publish_date) return -1;
            if(a.publish_date < b.publish_date) return 1;
            return 0;
        });
        $.each( item_list , function( key, val ) {
                var blog_rendered = Mustache.render(blog_template_html,val);
                item_rendered.push(blog_rendered);
        });
        $(blog_block).html(item_rendered.join(''));
    }
</script>    
    
    