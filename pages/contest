<style>
    .page_content{
        padding-top:0px;
    }
</style>
<div class="contest-container">
    <div class="row">
        <div class="col-xs-12">
            <div id="contest_image">
                <script id="contest_template" type="x-tmpl-mustache">
                    <img alt="..." src="{{photo_url_abs}}">
                </script>
            </div>
        </div>
        <div class="col-xs-12">
            <p><em>One entry per person.</em></p>
            <p><em>Apple is not a sponsor nor is involved in any way. Contest/Sweepstake prizes are not Apple products, using Apple products.</em><br></p>
            <hr class="break-line"/>
        </div> 
       
           <form accept-charset="UTF-8" action="" onsubmit="return validateForm()" id="contest_form" method="post">
            
                <div class="form-group col-md-6">
                    <label for="first_name">First Name</label>
                    <input type="text" id="first_name" class="form-control" name="" value="" />
                </div>
                <div class="form-group col-md-6">
                    <label for="last_name">Last Name</label>
                    <input type="text" id="last_name" class="form-control" name="" value=""/>
                </div>
                <div class="form-group col-md-6">
                    <label for="email">Email</label>
                    <input type="text" id="email" class="form-control" name="contest[email]" value=""/>
                </div>
                <div class="form-group col-md-6">
                    <label for="phone">Phone Number</label>
                    <input type="text" id="phone" class="form-control" name="contest[phone]" value=""/>
                </div>
                <div class="form-group col-md-3">
                    <label for="postal_code">Postal Code</label>
                    <input type="text" class="form-control" id="postal_code" name="contest[postal_code]" value=""/>
                </div>
                <div class="form-group col-xs-1">
                    <label for="age">Age</label>
                    <input type="text" id="age" class="form-control" name="contest[age]"  value=""/>
                </div>
                   
                <div class="form-group col-xs-2">
                    <label for="gender">Gender</label>
                    <select id="gender" class="form-control" name="contest[gender]">
                        <option value="">Choose</option>
                        <option value="female">Female</option>
                        <option value="male">Male</option>
                    </select>
                </div>                
                <div class="col-xs-12 checkbox-subscribe">          
                    <label for="mall_info">
                        <input class="" id="mall_info" type="checkbox" name="contest[newsletter]" />
                        Subscribe to Londonderry Newsletter
                    </label>
                </div> 
            
                <div class="col-xs-12 checkbox-agree">
                    <label><input type="checkbox" id="agree_terms"> I understand the Londonderry Online <a href="/privacy_policy" target="_blank"><u>Privacy Policy</u></a></label>
                </div>
                <div class="col-xs-12">
                    <input class="btn btn-success" name="commit" type="submit" value="Submit" style="width:325px; height: 45px;">
                </div>
            </form>

    </div>
</div>
<script>
    $(document).ready(function() {
        function renderPageData(){
            var repoList = getRepoList();
            renderContest("#contest_template", "#contest_image", repoList);
        }
        loadMallData(renderPageData);

        $('#loading').hide();
        $('#page_content').fadeIn('fast');
    });
    
    function renderContest(contest_template, contest_image, repo){
    
        var item_list = [];
        var item_rendered = [];
        var contest_template_html = $(contest_template).html();
        Mustache.parse(contest_template_html);   // optional, speeds up future uses
    
        
        $.each( repo , function( key, val ) {
            if( val.name == "contest"){
                $.each( val.images, function( key, image ) { 
                    var repo_rendered = Mustache.render(contest_template_html,image);
                    item_rendered.push(repo_rendered);
                });
            }
        });
        $(contest_image).show();
        $(contest_image).html(item_rendered.join(''));
    }
    
    function validateForm() {
        if ($("#first_name").val() == ""){
            alert("Please Enter First Name");
            $("#first_name").focus();
            return false;
        } else if ($("#last_name").val() == ""){
            alert("Please Enter Last Name");
            $("#last_name").focus();
            return false;
        } else if ($("#email").val() == ""){
            alert("Please Enter Email");
            $("#email").focus();
            return false;
        } else if(!isValidEmailAddress($("#email").val())){
            alert("Please Enter a valid email address");
            $("#email").focus();
            return false;
        } else if ($("#phone").val() == ""){
            alert("Please Enter Phone Number");
            $("#phone").focus();
            return false;
        } else if ($("#postal_code").val() == ""){
            alert("Please Enter Postal Code");
            $("#postal_code").focus();
            return false;
        } else if ($("#age").val() == ""){
            alert("Please Enter Age");
            $("#age").focus();
            return false;
        } else if ($("#agree_terms").prop("checked") != true){
            alert("Please agree to the term and conditions before submitting the contest.");
            $("#agree_terms").focus();
            return false;
        } 
    }
    function isValidEmailAddress(email) { 
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    }  
</script>