<div class="contest-container">
    <div class="row">
        <div class="col-xs-12">
            <div id="contest-image">
                <script id="contest_template" type="x-tmpl-mustache">
                    <img alt="..." src="{{photo_url_abs}}">
                </script>
            </div>
            <form accept-charset="UTF-8" action="" onsubmit="return validateForm()" id="contest_form" method="post">
            
                <div class="form-group col-xs-6">
                    <label for="first_name">First Name</label>
                    <input type="text" id="first_name" class="form-control" name="" value="" />
                </div>
                <div class="form-group col-xs-6">
                    <label for="last_name">Last Name</label>
                    <input type="text" id="last_name" class="form-control" name="" value=""/>
                </div>
                <div class="form-group col-xs-6">
                    <label for="email">Email</label>
                    <input type="text" id="email" class="form-control" name="contest[email]" value=""/>
                </div>
                <div class="form-group col-xs-6">
                    <label for="phone">Phone Number</label>
                    <input type="text" id="phone" class="form-control" name="contest[phone]" value=""/>
                </div>
                <div class="form-group col-xs-3">
                    <label for="postal_code">Postal Code</label>
                    <input type="text" class="form-control" id="postal_code" name="contest[postal_code]" value=""/>
                </div>
                <div class="form-group col-xs-3">
                    <label for="age">Age</label>
                    <input type="text" id="age" class="form-control" name="contest[age]"  value=""/>
                </div>
                   
                <div class="form-group col-xs-3">
                    <label for="gender">Gender</label>
                    <select id="gender" class="form-control" name="contest[gender]">
                        <option value="">Choose</option>
                        <option value="female">Female</option>
                        <option value="male">Male</option>
                    </select>
                </div>                
                <div class="">          
                    <label for="mall_info" style="display:none">Subscribe to STC Newsletter</label>
                    <input class="form-control" id="mall_info" type="checkbox" name="contest[newsletter]" />
                    <span>Subscribe to STC Newsletter</span>
                </div> 
            </form>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        function renderPageData(){
            var repoList = getRepoList();
            renderContest("#contest_template", "#contest_image", repoList);
        }
        loadMallData(renderPageData);

        $('#loading').hide();
        $('#page_content').fadeIn('fast');
    });
    
    function renderContest(contest_template, contest_image, repo){
    
        var item_list = [];
        var item_rendered = [];
        var contest_template_html = $(contest_template).html();
        Mustache.parse(contest_template_html);   // optional, speeds up future uses
    
        
        $.each( repo , function( key, val ) {
            if( val.name == "contest"){
                $.each( val.images, function( key, image ) { 
                    var repo_rendered = Mustache.render(contest_template_html,image);
                    item_rendered.push(repo_rendered);
                });
            }
        });
        $(contest_image).show();
        $(contest_image).html(item_rendered.join(''));
    }
</script>